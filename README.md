# Simon Static Test Site

## What is this?

This is a static site hosted on S3 used to test the Simon Signal integration.
It could be a platform for testing other website integrations in the future.

This project uses [Pelican](https://github.com/getpelican/pelican) to generate a
bunch of static pages with Simon Signal integration.

## How does it work?

Pelican is a static site generator written in python.  The project was 
bootstrapped by following the 
[Pelican Quickstart](https://docs.getpelican.com/en/stable/quickstart.html)
instructions.
 
The pages themselves were generated by the custom script `generate-content.py`.
This script produced a bunch of `post*.md` files in the `content` directory. 
These files don't have much content, but they do have an anchor, 
`[simon_signal]`, that gets replaced by a custom plugin with dynamically 
generated HTML & JS.  Feel free to customise the posts or regenerate them.

## Developing

After cloning, run `bash setup.sh` to initialize the virtualenv and install 
dependencies with pip.

Then activate the venv in your shell: `source ./venv/bin/activate`

Generate the site (creating files in the `output` folder): `pelican content`

Run the development server: `pelican --listen`

Now you can [load the site locally](http://localhost:8000)

When you're happy with it, you can deploy the site to S3 with: `make s3_upload`

## Files to be aware of

- `plugins/simon_signal/__init__.py`: this is a Pelican plugin that replaces its
token with dynamic HTML & JS.
- `plugins/simon_signal/template.jinja`: this is the dynamic HTML & JS template
- `content/`: this folder has the posts.  you can modify these to give them a
unique look.
- `generate-content.py`: quick script to generate a bunch of files in the 
`content/` folder.
- `output/`: where generated content will be written. this is excluded from git.
- `setup.sh`: bootstrap the project development environment
- `pelicanconf.py`: settings to control pelican
- `themes/elegant`: an open source theme from the internet with our
customizations
- `themes/elegant/static/simon`: this is where you can put static assets. they
can then be referenced in HTML under `theme/simon/`
- `themes/elegant/templates/base.html`: outer page container template (jinja).
we include a custom template at the end of the `<head>` in this file.
- `themes/elegant/templates/_includes/simon/signal.html`: stuff we want to 
include in the `<head>` for Simon Signal.
